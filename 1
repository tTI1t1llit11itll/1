-- MLVSHR START FRAMEWORK

-- Place this script in StarterPlayerScripts or another suitable location

local TweenService = game:GetService("TweenService")
local Lighting = game:GetService("Lighting")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- Create and configure the Highlight object
local highlight = Instance.new("Highlight")
highlight.Name = "PlayerHighlight"
highlight.Parent = character
highlight.FillColor = Color3.fromRGB(255, 0, 0) -- Pure red color
highlight.OutlineColor = Color3.fromRGB(255, 0, 0) -- Pure red color
highlight.FillTransparency = 1 -- Start fully transparent
highlight.OutlineTransparency = 1 -- Start fully transparent
highlight.Enabled = true

-- Tween settings for the Highlight
local tweenInfoHighlight = TweenInfo.new(2, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut)
local goalHighlight = {
    FillTransparency = 0, -- End fully opaque
    OutlineTransparency = 0 -- End fully opaque
}
local tweenHighlight = TweenService:Create(highlight, tweenInfoHighlight, goalHighlight)

-- Tween settings for the environment
local tweenInfoEnvironment = TweenInfo.new(2, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut)
local goalEnvironment = {
    Ambient = Color3.fromRGB(0, 0, 0), -- Black ambient color
    OutdoorAmbient = Color3.fromRGB(0, 0, 0), -- Black outdoor ambient color
    Brightness = 0, -- Lower brightness for night effect
    ClockTime = 0, -- Simulate midnight
    ExposureCompensation = -2 -- Lower exposure for darker effect
}
local tweenEnvironment = TweenService:Create(Lighting, tweenInfoEnvironment, goalEnvironment)

-- Function to apply tween to the highlight
local function applyHighlightTween()
    tweenHighlight:Play()
end

-- Function to apply tween to the environment
local function applyEnvironmentTween()
    tweenEnvironment:Play()
end

-- Apply tweens
applyHighlightTween()
applyEnvironmentTween()

-- Ensure the highlight stays with the character
character:WaitForChild("HumanoidRootPart").Changed:Connect(function()
    highlight.Adornee = character
end)

-- Handle character respawn
player.CharacterAdded:Connect(function(newCharacter)
    -- Remove previous highlight
    local oldHighlight = character:FindFirstChild("PlayerHighlight")
    if oldHighlight then
        oldHighlight:Destroy()
    end

    -- Set new character and apply highlight
    character = newCharacter

    -- Create new highlight
    local newHighlight = Instance.new("Highlight")
    newHighlight.Name = "PlayerHighlight"
    newHighlight.Parent = character
    newHighlight.FillColor = Color3.fromRGB(255, 0, 0) -- Pure red color
    newHighlight.OutlineColor = Color3.fromRGB(255, 0, 0) -- Pure red color
    newHighlight.FillTransparency = 1 -- Start fully transparent
    newHighlight.OutlineTransparency = 1 -- Start fully transparent
    newHighlight.Enabled = true

    -- Apply new highlight tween
    local tween = TweenService:Create(newHighlight, tweenInfoHighlight, goalHighlight)
    tween:Play()
end)
